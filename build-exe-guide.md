# دليل إنشاء ملف .exe للتطبيق - خطوة بخطوة

## المرحلة الرابعة: إنشاء الأيقونة

### 1. تحضير ملف الأيقونة
أنشئ أيقونة بصيغة .ico للويندوز:
- استخدم أي برنامج لتحويل الصور (مثل https://convertio.co/png-ico/)
- حجم الأيقونة: 256x256 بكسل أو أكبر
- احفظ الأيقونة في `electron/assets/icon.ico`

### 2. إنشاء ملف الأيقونة البديل
إذا لم تتوفر أيقونة، أنشئ ملف بسيط:
```cmd
mkdir electron\assets
```
ضع أي ملف .ico في هذا المجلد أو استخدم الأيقونة الافتراضية.

## المرحلة الخامسة: بناء التطبيق

### 1. بناء ملفات التطبيق
```cmd
npm run build
```
هذا سيبني التطبيق وينشئ مجلد `dist` مع جميع الملفات المطلوبة.

### 2. إنشاء ملف .exe
```cmd
npx electron-builder --win --x64
```
أو
```cmd
npm run dist-win
```

### 3. العثور على الملف المُنشأ
بعد اكتمال العملية، ستجد الملفات في:
```
dist-electron/
├── win-unpacked/           (مجلد التطبيق غير المضغوط)
├── نظام إدارة المستشفى Setup 1.0.0.exe  (ملف التثبيت)
└── latest.yml              (ملف معلومات)
```

## أنواع الملفات المُنتجة

### 1. ملف التثبيت (.exe)
- اسم الملف: `نظام إدارة المستشفى Setup 1.0.0.exe`
- يقوم بتثبيت التطبيق على النظام
- ينشئ اختصارات على سطح المكتب وقائمة ابدأ
- حجم تقريبي: 150-200 ميجابايت

### 2. المجلد المحمول (win-unpacked)
- يحتوي على التطبيق كاملاً
- لا يحتاج تثبيت
- يمكن نسخه على فلاش ميموري وتشغيله على أي جهاز

## اختبار التطبيق

### 1. اختبار قبل البناء
```cmd
npm run electron-dev
```
هذا سيشغل التطبيق في وضع التطوير للتأكد من عمله.

### 2. اختبار بعد البناء
- شغل ملف .exe المُنشأ
- تأكد من ظهور واجهة التطبيق
- تأكد من الاتصال بقاعدة البيانات

## إعدادات التخصيص

### 1. تغيير اسم التطبيق
في ملف `package.json`:
```json
"build": {
  "productName": "الاسم المطلوب للتطبيق"
}
```

### 2. تغيير معلومات التثبيت
```json
"nsis": {
  "shortcutName": "اسم الاختصار",
  "installerHeaderIcon": "electron/assets/icon.ico"
}
```

### 3. إضافة معلومات الشركة
```json
"win": {
  "publisherName": "اسم الشركة أو المطور",
  "verInfo": {
    "CompanyName": "اسم الشركة",
    "ProductName": "نظام إدارة المستشفى"
  }
}
```

## حل المشاكل الشائعة

### مشكلة: Build failed
```cmd
# امسح المجلدات المؤقتة وأعد المحاولة
rmdir /s dist
rmdir /s dist-electron
npm run build
npm run dist-win
```

### مشكلة: الأيقونة لا تظهر
- تأكد من وجود ملف `icon.ico` في `electron/assets/`
- تأكد من أن الأيقونة بصيغة .ico وليس .png
- حجم الأيقونة يجب أن يكون 256x256 أو أكبر

### مشكلة: التطبيق لا يتصل بقاعدة البيانات
- تأكد من وجود ملف `.env` مع إعدادات Firebase الصحيحة
- تأكد من الاتصال بالإنترنت عند تشغيل التطبيق

## التوزيع والنشر

### 1. إنشاء حزمة للتوزيع
```cmd
# إنشاء ملف مضغوط للتوزيع
npm run pack
```

### 2. إنشاء إصدارات متعددة
```cmd
# للأنظمة 32-bit و 64-bit
npx electron-builder --win --ia32 --x64
```

### 3. إنشاء ملف محمول
```cmd
npx electron-builder --win portable
```

## الملفات النهائية

بعد اكتمال العملية، ستحصل على:

1. **ملف التثبيت**: `نظام إدارة المستشفى Setup 1.0.0.exe`
   - لتثبيت التطبيق على أي جهاز Windows
   - ينشئ اختصارات ويسجل التطبيق في النظام

2. **المجلد المحمول**: `win-unpacked/`
   - يحتوي على التطبيق كاملاً
   - لا يحتاج تثبيت، يمكن تشغيله مباشرة

3. **ملف معلومات**: `latest.yml`
   - يحتوي على معلومات الإصدار

## نصائح مهمة

1. **حفظ إعدادات Firebase**: تأكد من وضع ملف `.env` في مجلد التطبيق النهائي
2. **حجم الملف**: الملف النهائي سيكون كبيراً (150-200 MB) لأنه يحتوي على جميع مكتبات Node.js
3. **متطلبات النظام**: التطبيق يعمل على Windows 10/11 فقط
4. **الأمان**: Windows قد يحذر من التطبيق لأنه غير موقع، اختر "تشغيل على أي حال"

بهذه الطريقة ستحصل على ملف .exe كامل يمكن توزيعه وتشغيله على أي جهاز Windows دون الحاجة لتثبيت Node.js أو أي برامج إضافية.